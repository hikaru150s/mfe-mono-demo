"use strict";(self.webpackChunkshell=self.webpackChunkshell||[]).push([[15],{4394:(e,i,l)=>{l.r(i),l.d(i,{default:()=>ne});var n=l(6778),r=l(3861),m=l(1334),t=l(6150);const a="item",u=new t.ItemService("http://localhost:8080/api"),o=(0,m.createEntityAdapter)(),s=(0,m.createAsyncThunk)("item/fetchStatus",(async(e={},i)=>{const{keyword:l,page:n,pageSize:r}=e;return(await u.getItems(l,n,r)).data})),d=(0,m.createAsyncThunk)("item/fetchOneStatus",(async(e,i)=>(await u.getItem(e)).data)),c=(0,m.createAsyncThunk)("item/addStatus",(async(e,i)=>(await u.createItem(e)).data)),N=(0,m.createAsyncThunk)("item/updateStatus",(async(e,i)=>(await u.updateItem(e.id,{name:e.name,description:e.description})).data)),b=(0,m.createAsyncThunk)("item/deleteStatus",(async(e,i)=>(await u.deleteItem(e)).data)),h=o.getInitialState({loadingStatus:"not loaded",error:null,searchQuery:"",currentPage:1,totalPages:0}),f=(0,m.createSlice)({name:a,initialState:h,reducers:{setSeatchQuery:(e,i)=>{e.searchQuery=i.payload},setCurrentPage:(e,i)=>{e.currentPage=i.payload}},extraReducers:e=>{e.addCase(s.pending,(e=>{e.loadingStatus="loading"})).addCase(s.fulfilled,((e,i)=>{o.setAll(e,i.payload.data),e.loadingStatus="loaded",e.totalPages=Math.ceil(i.payload.count/10)})).addCase(s.rejected,((e,i)=>{e.loadingStatus="error",e.error=i.error.message})).addCase(d.pending,(e=>{e.loadingStatus="loading"})).addCase(d.fulfilled,((e,i)=>{e.loadingStatus="loaded",i.payload&&o.upsertOne(e,i.payload)})).addCase(d.rejected,((e,i)=>{e.loadingStatus="error",e.error=i.error.message||"fetch failed"})).addCase(c.pending,(e=>{e.loadingStatus="loading"})).addCase(c.fulfilled,((e,i)=>{e.loadingStatus="loaded",o.addOne(e,i.payload)})).addCase(c.rejected,((e,i)=>{e.loadingStatus="error",e.error=i.error.message||"fetch failed"})).addCase(N.pending,(e=>{e.loadingStatus="loading"})).addCase(N.fulfilled,((e,i)=>{e.loadingStatus="loaded",o.upsertOne(e,i.payload)})).addCase(N.rejected,((e,i)=>{e.loadingStatus="error",e.error=i.error.message||"fetch failed"})).addCase(b.pending,(e=>{e.loadingStatus="loading"})).addCase(b.fulfilled,((e,i)=>{e.loadingStatus="loaded",o.removeOne(e,i.payload)})).addCase(b.rejected,((e,i)=>{e.loadingStatus="error",e.error=i.error.message||"fetch failed"}))}}),v=f.reducer,x=f.actions,{selectAll:j,selectEntities:E,selectById:p}=o.getSelectors(),D=e=>e[a],V=(0,m.createSelector)(D,j),g=((0,m.createSelector)(D,E),e=>(0,m.createSelector)(D,(i=>p(i,e)))),y=(0,m.createSelector)(D,(e=>e.currentPage)),S=(0,m.createSelector)(D,(e=>e.totalPages)),C=(0,m.createSelector)(D,(e=>e.searchQuery)),k=(0,m.createSelector)(D,(e=>e.loadingStatus)),w=(0,m.createSelector)(D,(e=>e.error)),I=(0,m.configureStore)({reducer:{[a]:v},middleware:e=>e(),devTools:!0,enhancers:[]}),P={};var T=l(6587),A=l(1700),B=l.n(A),O=l(764),R=l.n(O),H=l(2388),L=l.n(H),Q=l(5392),Y=l.n(Q),F=l(8028),$=l.n(F),z=l(2207),G="E:\\prj\\mfe-mono\\apps\\modules\\crud\\src\\app\\components\\crud-table\\crud-table.tsx";const q=function(){const e=(0,n.useDispatch)(),i=(0,n.useSelector)(V),l=(0,n.useSelector)(y),m=(0,n.useSelector)(S),t=(0,n.useSelector)(C),a=(0,r.useNavigate)();function u(){e(s({keyword:t,page:l,pageSize:10}))}function o(){e(x.setCurrentPage(1)),u()}function d(i){e(x.setCurrentPage(i)),u()}return(0,T.useEffect)((()=>{u()}),[l]),(0,z.jsxDEV)("div",{className:P.container,children:(0,z.jsxDEV)(B(),{children:[(0,z.jsxDEV)(B().Header,{children:"Items CRUD"},void 0,!1,{fileName:G,lineNumber:57,columnNumber:9},this),(0,z.jsxDEV)(B().Body,{children:[(0,z.jsxDEV)("div",{className:"d-flex mb-3 gap-3",children:[(0,z.jsxDEV)(R().Control,{type:"text",placeholder:"Search ...",value:t,onChange:function(i){e(x.setSeatchQuery(i.target.value))},onKeyDown:e=>"Enter"===e.key&&o(),className:"flex-grow-1"},void 0,!1,{fileName:G,lineNumber:62,columnNumber:13},this),(0,z.jsxDEV)(L(),{type:"button",onClick:o,children:(0,z.jsxDEV)("i",{className:"bi bi-search"},void 0,!1,{fileName:G,lineNumber:71,columnNumber:15},this)},void 0,!1,{fileName:G,lineNumber:70,columnNumber:13},this)]},void 0,!0,{fileName:G,lineNumber:61,columnNumber:11},this),(0,z.jsxDEV)(Y(),{striped:!0,bordered:!0,hover:!0,children:[(0,z.jsxDEV)("thead",{children:(0,z.jsxDEV)("tr",{children:[(0,z.jsxDEV)("th",{children:"Id"},void 0,!1,{fileName:G,lineNumber:77,columnNumber:17},this),(0,z.jsxDEV)("th",{children:"Name"},void 0,!1,{fileName:G,lineNumber:78,columnNumber:17},this),(0,z.jsxDEV)("th",{children:"Description"},void 0,!1,{fileName:G,lineNumber:79,columnNumber:17},this),(0,z.jsxDEV)("th",{children:(0,z.jsxDEV)(L(),{onClick:()=>a("./new"),children:[(0,z.jsxDEV)("i",{className:"bi bi-plus"},void 0,!1,{fileName:G,lineNumber:82,columnNumber:21},this),"New"]},void 0,!0,{fileName:G,lineNumber:81,columnNumber:19},this)},void 0,!1,{fileName:G,lineNumber:80,columnNumber:17},this)]},void 0,!0,{fileName:G,lineNumber:76,columnNumber:15},this)},void 0,!1,{fileName:G,lineNumber:75,columnNumber:13},this),(0,z.jsxDEV)("tbody",{children:i.map((e=>(0,z.jsxDEV)("tr",{children:[(0,z.jsxDEV)("td",{children:e.id},void 0,!1,{fileName:G,lineNumber:91,columnNumber:19},this),(0,z.jsxDEV)("td",{children:e.name},void 0,!1,{fileName:G,lineNumber:92,columnNumber:19},this),(0,z.jsxDEV)("td",{children:e.description||""},void 0,!1,{fileName:G,lineNumber:93,columnNumber:19},this),(0,z.jsxDEV)("td",{children:(0,z.jsxDEV)($(),{children:[(0,z.jsxDEV)(L(),{onClick:()=>a(`./${e.id}/details`),children:(0,z.jsxDEV)("i",{className:"bi bi-info-circle"},void 0,!1,{fileName:G,lineNumber:97,columnNumber:25},this)},void 0,!1,{fileName:G,lineNumber:96,columnNumber:23},this),(0,z.jsxDEV)(L(),{onClick:()=>a(`./${e.id}/edit`),children:(0,z.jsxDEV)("i",{className:"bi bi-pencil"},void 0,!1,{fileName:G,lineNumber:100,columnNumber:25},this)},void 0,!1,{fileName:G,lineNumber:99,columnNumber:23},this),(0,z.jsxDEV)(L(),{onClick:()=>a(`./${e.id}/delete`),children:(0,z.jsxDEV)("i",{className:"bi bi-trash"},void 0,!1,{fileName:G,lineNumber:103,columnNumber:25},this)},void 0,!1,{fileName:G,lineNumber:102,columnNumber:23},this)]},void 0,!0,{fileName:G,lineNumber:95,columnNumber:21},this)},void 0,!1,{fileName:G,lineNumber:94,columnNumber:19},this)]},e.id,!0,{fileName:G,lineNumber:90,columnNumber:17},this)))},void 0,!1,{fileName:G,lineNumber:88,columnNumber:13},this)]},void 0,!0,{fileName:G,lineNumber:74,columnNumber:11},this)]},void 0,!0,{fileName:G,lineNumber:60,columnNumber:9},this),(0,z.jsxDEV)(B().Footer,{children:(0,z.jsxDEV)("div",{className:"d-flex justify-content-center",children:(0,z.jsxDEV)($(),{children:[(0,z.jsxDEV)(L(),{onClick:()=>d(l-1),disabled:1===l,children:(0,z.jsxDEV)("i",{className:"bi bi-arrow-left"},void 0,!1,{fileName:G,lineNumber:116,columnNumber:17},this)},void 0,!1,{fileName:G,lineNumber:115,columnNumber:15},this),(0,z.jsxDEV)(L(),{disabled:!0,children:["Page ",l," of ",m]},void 0,!0,{fileName:G,lineNumber:118,columnNumber:15},this),(0,z.jsxDEV)(L(),{onClick:()=>d(l+1),disabled:l===m,children:(0,z.jsxDEV)("i",{className:"bi bi-arrow-right"},void 0,!1,{fileName:G,lineNumber:122,columnNumber:17},this)},void 0,!1,{fileName:G,lineNumber:121,columnNumber:15},this)]},void 0,!0,{fileName:G,lineNumber:114,columnNumber:13},this)},void 0,!1,{fileName:G,lineNumber:113,columnNumber:11},this)},void 0,!1,{fileName:G,lineNumber:112,columnNumber:9},this)]},void 0,!0,{fileName:G,lineNumber:56,columnNumber:7},this)},void 0,!1,{fileName:G,lineNumber:55,columnNumber:5},this)},K={};var M="E:\\prj\\mfe-mono\\apps\\modules\\crud\\src\\app\\components\\crud-form\\crud-form.tsx";const U=function(){const{itemId:e}=(0,r.useParams)(),i=(0,n.useDispatch)(),l=(0,n.useSelector)((i=>e?g(e)(i):null)),m=(0,n.useSelector)(k),t=((0,n.useSelector)(w),null!=e),a=(0,r.useNavigate)();return(0,T.useEffect)((()=>{!l&&e&&i(d(e))}),[i,l,e]),(0,z.jsxDEV)("div",{className:K.container,children:(0,z.jsxDEV)(B(),{children:[(0,z.jsxDEV)(B().Header,{children:(0,z.jsxDEV)(B().Title,{children:[t?"Edit":"Create"," Item"]},void 0,!0,{fileName:M,lineNumber:63,columnNumber:11},this)},void 0,!1,{fileName:M,lineNumber:62,columnNumber:9},this),(0,z.jsxDEV)(B().Body,{children:(0,z.jsxDEV)(R(),{onSubmit:async function(l){l.preventDefault();const n=l.currentTarget,r=n.elements.namedItem("name"),m=n.elements.namedItem("description"),u=t?N({id:e,name:r.value,description:m.value||null}):c({name:r.value,description:m.value||null});await i(u).unwrap()&&a(t?"../..":"..",{replace:!0})},children:[(0,z.jsxDEV)(R().Group,{className:"mb-3",controlId:"name",children:[(0,z.jsxDEV)(R().Label,{children:"Name"},void 0,!1,{fileName:M,lineNumber:68,columnNumber:15},this),(0,z.jsxDEV)(R().Control,{type:"text",name:"name",defaultValue:l?.name,required:!0},void 0,!1,{fileName:M,lineNumber:69,columnNumber:15},this)]},void 0,!0,{fileName:M,lineNumber:67,columnNumber:13},this),(0,z.jsxDEV)(R().Group,{className:"mb-3",controlId:"description",children:[(0,z.jsxDEV)(R().Label,{children:"Description"},void 0,!1,{fileName:M,lineNumber:72,columnNumber:15},this),(0,z.jsxDEV)(R().Control,{as:"textarea",name:"description",defaultValue:l?.description||""},void 0,!1,{fileName:M,lineNumber:73,columnNumber:15},this)]},void 0,!0,{fileName:M,lineNumber:71,columnNumber:13},this)]},void 0,!0,{fileName:M,lineNumber:66,columnNumber:11},this)},void 0,!1,{fileName:M,lineNumber:65,columnNumber:9},this),(0,z.jsxDEV)(B().Footer,{children:(0,z.jsxDEV)("div",{className:"d-flex justify-content-end gap-3",children:[(0,z.jsxDEV)(L(),{variant:"primary",type:"submit",disabled:"loading"===m,children:"Submit"},void 0,!1,{fileName:M,lineNumber:79,columnNumber:13},this),(0,z.jsxDEV)(L(),{variant:"secondary",onClick:()=>a(-1),children:"Cancel"},void 0,!1,{fileName:M,lineNumber:82,columnNumber:13},this)]},void 0,!0,{fileName:M,lineNumber:78,columnNumber:11},this)},void 0,!1,{fileName:M,lineNumber:77,columnNumber:9},this)]},void 0,!0,{fileName:M,lineNumber:61,columnNumber:7},this)},void 0,!1,{fileName:M,lineNumber:60,columnNumber:5},this)},J={};var W=l(172),X=l.n(W),Z=l(468),_=l.n(Z),ee="E:\\prj\\mfe-mono\\apps\\modules\\crud\\src\\app\\components\\crud-detail\\crud-detail.tsx";const ie=function({mode:e="view"}){const{itemId:i}=(0,r.useParams)(),l=(0,n.useDispatch)(),m=(0,n.useSelector)((e=>i?g(i)(e):null)),t=(0,n.useSelector)(k),a=(0,n.useSelector)(w),u=(0,r.useNavigate)();function o(){u(-1)}switch((0,T.useEffect)((()=>{!m&&i&&l(d(i))}),[l,m,i]),t){case"loading":return(0,z.jsxDEV)(X(),{animation:"border",role:"status",children:(0,z.jsxDEV)("span",{className:"visually-hidden",children:"Loading..."},void 0,!1,{fileName:ee,lineNumber:53,columnNumber:11},this)},void 0,!1,{fileName:ee,lineNumber:52,columnNumber:9},this);case"error":return(0,z.jsxDEV)(_(),{variant:"danger",children:[(0,z.jsxDEV)(_().Heading,{children:"Oh snap! You got an error!"},void 0,!1,{fileName:ee,lineNumber:60,columnNumber:11},this),(0,z.jsxDEV)("p",{children:a},void 0,!1,{fileName:ee,lineNumber:61,columnNumber:11},this),(0,z.jsxDEV)(_().Link,{onClick:o,children:"Back"},void 0,!1,{fileName:ee,lineNumber:62,columnNumber:11},this)]},void 0,!0,{fileName:ee,lineNumber:59,columnNumber:9},this);case"not loaded":return(0,z.jsxDEV)(_(),{variant:"warning",children:[(0,z.jsxDEV)(_().Heading,{children:"Oh snap! You got an error!"},void 0,!1,{fileName:ee,lineNumber:69,columnNumber:11},this),(0,z.jsxDEV)("p",{children:"Could not load item"},void 0,!1,{fileName:ee,lineNumber:70,columnNumber:11},this),(0,z.jsxDEV)(_().Link,{onClick:o,children:"Back"},void 0,!1,{fileName:ee,lineNumber:71,columnNumber:11},this)]},void 0,!0,{fileName:ee,lineNumber:68,columnNumber:9},this);default:return m?(0,z.jsxDEV)("div",{className:J.container,children:(0,z.jsxDEV)(B(),{children:[(0,z.jsxDEV)(B().Header,{children:(0,z.jsxDEV)(B().Title,{children:m.name},void 0,!1,{fileName:ee,lineNumber:89,columnNumber:15},this)},void 0,!1,{fileName:ee,lineNumber:88,columnNumber:13},this),(0,z.jsxDEV)(B().Body,{children:(0,z.jsxDEV)(B().Text,{children:(0,z.jsxDEV)("pre",{children:m.description},void 0,!1,{fileName:ee,lineNumber:93,columnNumber:17},this)},void 0,!1,{fileName:ee,lineNumber:92,columnNumber:15},this)},void 0,!1,{fileName:ee,lineNumber:91,columnNumber:13},this),(0,z.jsxDEV)(B().Footer,{children:"delete"===e?(0,z.jsxDEV)("div",{className:"d-flex justify-content-between",children:[(0,z.jsxDEV)("span",{children:"Are you sure you want to delete this item?"},void 0,!1,{fileName:ee,lineNumber:99,columnNumber:19},this),(0,z.jsxDEV)("div",{className:"d-flex justify-content-end gap-3",children:[(0,z.jsxDEV)(L(),{type:"button",onClick:async function(){m&&(await l(b(m.id)).unwrap(),u("../../",{replace:!0}))},children:"Yes"},void 0,!1,{fileName:ee,lineNumber:101,columnNumber:21},this),(0,z.jsxDEV)(L(),{type:"button",onClick:o,children:"No"},void 0,!1,{fileName:ee,lineNumber:102,columnNumber:21},this)]},void 0,!0,{fileName:ee,lineNumber:100,columnNumber:19},this)]},void 0,!0,{fileName:ee,lineNumber:98,columnNumber:17},this):(0,z.jsxDEV)("div",{className:"d-flex justify-content-end gap-3",children:[(0,z.jsxDEV)(L(),{type:"button",onClick:o,children:"Back"},void 0,!1,{fileName:ee,lineNumber:107,columnNumber:19},this),(0,z.jsxDEV)(L(),{type:"button",onClick:()=>u("./../edit"),children:"Edit"},void 0,!1,{fileName:ee,lineNumber:108,columnNumber:19},this),(0,z.jsxDEV)(L(),{type:"button",onClick:()=>u("./../delete"),children:"Delete"},void 0,!1,{fileName:ee,lineNumber:109,columnNumber:19},this)]},void 0,!0,{fileName:ee,lineNumber:106,columnNumber:17},this)},void 0,!1,{fileName:ee,lineNumber:96,columnNumber:13},this)]},void 0,!0,{fileName:ee,lineNumber:87,columnNumber:11},this)},void 0,!1,{fileName:ee,lineNumber:86,columnNumber:9},this):(0,z.jsxDEV)(_(),{variant:"warning",children:[(0,z.jsxDEV)(_().Heading,{children:"Oh snap! You got an error!"},void 0,!1,{fileName:ee,lineNumber:79,columnNumber:13},this),(0,z.jsxDEV)("p",{children:"Item not found"},void 0,!1,{fileName:ee,lineNumber:80,columnNumber:13},this),(0,z.jsxDEV)(_().Link,{onClick:o,children:"Back"},void 0,!1,{fileName:ee,lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:ee,lineNumber:78,columnNumber:11},this)}};var le="E:\\prj\\mfe-mono\\apps\\modules\\crud\\src\\app\\app.tsx";const ne=function(){return(0,z.jsxDEV)(n.Provider,{store:I,children:(0,z.jsxDEV)(r.Routes,{children:[(0,z.jsxDEV)(r.Route,{path:"/",element:(0,z.jsxDEV)(q,{},"table",!1,{fileName:le,lineNumber:14,columnNumber:34},this)},void 0,!1,{fileName:le,lineNumber:14,columnNumber:9},this),(0,z.jsxDEV)(r.Route,{path:"new",element:(0,z.jsxDEV)(U,{},"form-new",!1,{fileName:le,lineNumber:15,columnNumber:36},this)},void 0,!1,{fileName:le,lineNumber:15,columnNumber:9},this),(0,z.jsxDEV)(r.Route,{path:":itemId/details",element:(0,z.jsxDEV)(ie,{mode:"view"},"view",!1,{fileName:le,lineNumber:16,columnNumber:48},this)},"view",!1,{fileName:le,lineNumber:16,columnNumber:9},this),(0,z.jsxDEV)(r.Route,{path:":itemId/edit",element:(0,z.jsxDEV)(U,{},"form-edit",!1,{fileName:le,lineNumber:17,columnNumber:45},this)},"edit",!1,{fileName:le,lineNumber:17,columnNumber:9},this),(0,z.jsxDEV)(r.Route,{path:":itemId/delete",element:(0,z.jsxDEV)(ie,{mode:"delete"},"delete",!1,{fileName:le,lineNumber:18,columnNumber:47},this)},"delete",!1,{fileName:le,lineNumber:18,columnNumber:9},this)]},void 0,!0,{fileName:le,lineNumber:13,columnNumber:7},this)},void 0,!1,{fileName:le,lineNumber:12,columnNumber:5},this)}}}]);